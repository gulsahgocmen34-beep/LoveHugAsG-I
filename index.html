<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Kavuşma</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
html,body{
  margin:0;padding:0;
  width:100%;height:100%;
  overflow:hidden;
  background:#000;
  font-family:monospace;
  -webkit-tap-highlight-color:transparent;
}

/* START */
#startScreen{
  position:fixed;inset:0;
  background:url("start.jpg") center/cover no-repeat;
  z-index:10000;
  cursor:pointer;
}

/* GAME */
#game{
  position:relative;
  width:100vw;height:100vh;
  background:url("Ocean_background_6.png") center bottom/cover no-repeat;
  display:none;
}

/* GROUND */
#ground{
  position:absolute;bottom:0;width:100%;
  height:18vh;
  background:url("grass.png") repeat-x;
}

/* CHARACTERS */
.character{
  position:absolute;
  bottom:18vh;
  width:14vw;
  max-width:96px;
  min-width:64px;
  image-rendering:pixelated;
  animation:bounce .6s infinite alternate;
}
@keyframes bounce{
  from{transform:translateY(0)}
  to{transform:translateY(-1.2vh)}
}
#girl{left:5vw}
#boy{right:5vw;transform:scaleX(-1)}

/* SPEECH */
#speech{
  position:absolute;
  width:60vw;
  max-width:280px;
  opacity:0;
  transform:translate(-50%,10px) scale(.9);
  transition:all .6s ease;
  z-index:20;
}
#speech.show{
  opacity:1;
  transform:translate(-50%,0) scale(1);
}

/* YOU WIN */
#youWin{
  position:fixed;
  top:6vh;left:50%;
  transform:translateX(-50%) scale(.85);
  width:70vw;max-width:440px;
  opacity:0;
  filter:blur(8px);
  transition:all 1.4s ease;
  z-index:900;
}
#youWin.show{
  opacity:1;
  filter:blur(0)
    drop-shadow(0 0 12px #ffd86b)
    drop-shadow(0 0 28px #ff9f1c)
    drop-shadow(0 0 48px #ff5e00);
  transform:translateX(-50%) scale(1);
}

/* HEART EFFECTS */
.center-heart{
  position:absolute;
  font-size:24px;
  color:#ff2d55;
  animation:centerFloat 2.4s ease-out forwards;
  pointer-events:none;
  z-index:15;
}
@keyframes centerFloat{
  from{opacity:1;transform:translate(-50%,0)}
  to{opacity:0;transform:translate(-50%,-22vh) scale(1.8)}
}

.bottom-heart{
  position:fixed;
  bottom:-40px;
  font-size:20px;
  color:#ff5e8a;
  animation:flyUp linear forwards;
  pointer-events:none;
  z-index:10;
}
@keyframes flyUp{
  from{transform:translateY(0) scale(.8);opacity:0}
  15%{opacity:1}
  to{transform:translateY(-120vh) scale(1.6);opacity:0}
}

#bigHeart{
  position:fixed;
  left:50%;top:50%;
  font-size:30vw;
  transform:translate(-50%,-50%) scale(0);
  opacity:0;
  z-index:950;
}
@keyframes heartPop{
  0%{transform:translate(-50%,-50%) scale(0);opacity:0}
  30%{transform:translate(-50%,-50%) scale(2);opacity:1}
  55%{transform:translate(-50%,-50%) scale(3);opacity:1}
  100%{transform:translate(-50%,-50%) scale(0);opacity:0}
}

.pop-heart{
  position:fixed;
  left:50%;top:50%;
  font-size:26px;
  animation:flyOut 2.6s ease-out forwards;
  pointer-events:none;
  z-index:960;
}
@keyframes flyOut{
  to{transform:translate(var(--x),var(--y)) scale(0);opacity:0}
}

/* REPLAY */
#replayBtn{
  position:fixed;
  bottom:4vh;right:4vw;
  padding:12px 18px;
  background:#111;color:#fff;
  border:2px solid #fff;
  cursor:pointer;
  display:none;
  z-index:1000;
}
</style>
</head>

<body>

<div id="startScreen"></div>

<div id="game">
  <img id="girl" class="character" src="girl.png">
  <img id="boy" class="character" src="boy.png">
  <img id="speech" src="speech.png">
  <div id="ground"></div>
</div>

<img id="youWin" src="youwin.png">
<div id="bigHeart">❤️</div>
<button id="replayBtn">Replay</button>

<script>
const startScreen=document.getElementById("startScreen");
const game=document.getElementById("game");
const girl=document.getElementById("girl");
const boy=document.getElementById("boy");
const speech=document.getElementById("speech");
const youWin=document.getElementById("youWin");
const bigHeart=document.getElementById("bigHeart");
const replayBtn=document.getElementById("replayBtn");

let step=0;
const totalSteps=10;
const stepDelay=360;

function startGame(){
  startScreen.style.display="none";
  game.style.display="block";
  walk();
}
startScreen.addEventListener("click",startGame);
startScreen.addEventListener("touchstart",startGame);

function walk(){
  const w=setInterval(()=>{
    step++;

    const progress = step / totalSteps;
    const maxOffset = 32; // vw
    const offset = maxOffset * progress;

    girl.style.left = (5 + offset) + "vw";
    boy.style.right = (5 + offset) + "vw";

    if(step>=totalSteps){
      clearInterval(w);
      setTimeout(finalScene,500);
    }
  },stepDelay);
}

function finalScene(){
  girl.style.animation="none";
  boy.style.animation="none";

  const girlW = girl.offsetWidth;
  const boyW  = boy.offsetWidth;
  const centerX = window.innerWidth / 2;
  const groundY = window.innerHeight * 0.18;

  const totalWidth = girlW + boyW;

  girl.style.left = (centerX - totalWidth / 2) + "px";
  boy.style.left  = (centerX - totalWidth / 2 + girlW) + "px";
  boy.style.right="auto";
  boy.style.transform="scaleX(1)";

  speech.style.left = centerX + "px";
  speech.style.bottom = (groundY + girl.offsetHeight + 20) + "px";
  speech.classList.add("show");

  youWin.classList.add("show");

  startCenterHearts(centerX, groundY + 80);
  startBottomHearts();

  bigHeart.style.animation="heartPop 1.6s ease-out forwards";
  setTimeout(popHearts,700);

  replayBtn.style.display="block";
}

/* HEART EFFECTS */
function startCenterHearts(x,y){
  const i=setInterval(()=>{
    const h=document.createElement("div");
    h.className="center-heart";
    h.textContent="❤";
    h.style.left = x + (Math.random()*60-30) + "px";
    h.style.bottom = y + "px";
    game.appendChild(h);
    setTimeout(()=>h.remove(),2400);
  },300);
  setTimeout(()=>clearInterval(i),2600);
}

function startBottomHearts(){
  const i=setInterval(()=>{
    const h=document.createElement("div");
    h.className="bottom-heart";
    h.textContent="❤";
    h.style.left=Math.random()*100+"vw";
    h.style.fontSize=16+Math.random()*14+"px";
    h.style.animationDuration=4+Math.random()*3+"s";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),8000);
  },140);
  setTimeout(()=>clearInterval(i),4000);
}

function popHearts(){
  for(let i=0;i<40;i++){
    const h=document.createElement("div");
    h.className="pop-heart";
    h.textContent="❤";
    h.style.setProperty("--x",(Math.random()*800-400)+"px");
    h.style.setProperty("--y",(Math.random()*800-400)+"px");
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),2600);
  }
}

replayBtn.onclick=()=>location.reload();
</script>

</body>
</html>
